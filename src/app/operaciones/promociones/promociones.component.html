<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
    <div id="kt_app_toolbar_container" class="app-container container-fluid d-flex flex-stack">
        <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
        <h1 class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0">Menú Principal</h1>
        <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
            <li class="breadcrumb-item text-muted">
                <font class="text-muted">Operaciones</font>
            </li>
            <li class="breadcrumb-item">
                <span class="bullet bg-gray-500 w-5px h-2px"></span>
            </li>
            <li class="breadcrumb-item text-muted">Promociones</li>
        </ul>
        </div>
        
        <!--<div class="d-flex align-items-center gap-2 gap-lg-3">
            <div class="m-0">
                <button class="btn btn-sm btn-flex btn-secondary fw-bold" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                    <i class="ki-outline ki-magnifier fs-6 text-muted me-1"></i> Buscar
                </button>
            </div>
            <button class="btn btn-sm fw-bold btn-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_create_app">Botón</button>
        </div>-->
        
    </div>
</div>

<div id="kt_app_content" class="app-content flex-column-fluid">
    <div id="div_vista_no_liquidacion" style="display: none; margin-left: 1.8%;">
        <p class="text-gray-500 pt-2 fw-semibold fs-6">La caja está cerrada.</p>
    </div>
    <div id="div_vista_promociones" class="app-container container-fluid">
        <!------------------------------------------------------- PROGRESS BAR ------------------------------------------------------->
        <div id="div_cabecera" class="row" style="border-color: #c5c5c5;">
            <div class="col-xxl-11 col-12">
                <div class="card card-flush mb-5" style="border-color: #c5c5c5;">
                    <div class="card-body pt-5 pb-5">
                        <div class="row">
                            <div class="col-xxl-5 col-5">
                                <div class="row">
                                    <label class="col-sm-4 col-form-label" style="font-size: 12px; text-align: right;">Sistema:</label>
                                    <div class="col-sm-8">
                                        <select id="select_seleccionar_sistema" class="form-select form-select-sm" aria-label=".form-select-sm example" (change)="change_select_seleccionar_sistema()">
                                            <option value="0" selected>Todos</option>
                                            <option value="1">Ecommerce</option>
                                            <option value="2">AutoServicio</option>
                                            <option value="3">Intranet</option>
                                            <option value="4">Sispas</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xxl-6 col-6 text-center">
                                <button type="button" class="btn btn-sm btn-success" (click)="nuevoCupon()"><i class="fad fa-plus-circle"></i> Nuevo Cupón</button>
                                &nbsp;
                                <button type="button" class="btn btn-sm btn-info"><i class="fad fa-layer-group"></i> Grupo Cupones</button>
                                <!--&nbsp;
                                <button type="button" class="btn btn-sm btn-primary"><i class="fad fa-file-chart-line"></i> Reportes</button>-->
                            </div>
                            <!--<div class="col-md-1 text-center" style="display: flex; align-items: center;">
                                <div style="border-left: 1px solid #ccc; margin: 0 auto;">&nbsp;</div>
                            </div>
                            <div class="col-md-1 text-center" style="display: flex; align-items: center;">
                                <input class="form-check-input" type="radio" name="flexRadioDefault1" id="rdbActivos" checked> &nbsp;
                                <label class="form-check-label" for="rdbActivos"> ACTIVOS </label>
                            </div>
                            <div class="col-md-1 text-center" style="display: flex; align-items: center;">
                                <input class="form-check-input" type="radio" name="flexRadioDefault1" id="rdbInactivos"> &nbsp;
                                <label class="form-check-label" for="rdbInactivos"> INACTIVOS </label>
                            </div>
                            <div class="col-md-1 text-center" style="display: flex; align-items: center;">
                                <input class="form-check-input" type="radio" name="flexRadioDefault1" id="rdbTodos"> &nbsp;
                                <label class="form-check-label" for="rdbTodos"> TODOS </label>
                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!------------------------------------------------------- PROGRESS BAR ------------------------------------------------------->
        
        <!------------------------------------------------------- LISTA DE ITINERARIOS IDA ------------------------------------------------------->
        <div id="div_body" class="row" style="border-color: #c5c5c5;">
            <div class="col-xxl-11 col-12">
                <div class="card card-flush mb-5" style="border-color: #c5c5c5;">
                    <div class="card-body py-3">
                        <div class="table-responsive">
                            <table id="tabla_promociones" class="table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3">
                                <thead>
                                    <tr class="fw-bold text-muted fs-8">
                                        <th class="min-w-130px">Nombre</th>
                                        <th class="min-w-130px text-center">Sistema</th>
                                        <!--<th class="min-w-130px text-center">Tipo</th>-->
                                        <th class="min-w-150px">Fecha de Viaje</th>
                                        <th class="min-w-120px">Fecha de Compra</th>
                                        <th class="min-w-120px">Servicios</th>
                                        <th class="min-w-120px">Grupo Cupones</th>
                                        <th class="min-w-120px text-center">Descuento</th>
                                        <th class="min-w-100px text-center">Estado</th>
                                        <th class="min-w-100px text-center">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let DatosListaPromocionesCupones of lstDatosListaPromocionesCupones; index as i;" >
                                        <td>
                                            <!--<a href="#" target="_blank" class="text-gray-900 fw-bold text-hover-primary fs-7">{{DatosListaPromocionesCupones.nombre}} &nbsp;
                                            <i class="fad fa-tag" *ngIf="DatosListaPromocionesCupones.tipo_promocion == 1" title="Cupón"></i>
                                            <i class="fad fa-calendar-day" *ngIf="DatosListaPromocionesCupones.tipo_promocion == 2" title="Días Cyber"></i></a>-->
                                            <font class="text-gray-900 fw-bold text-hover-primary fs-8">{{DatosListaPromocionesCupones.nombre}} &nbsp;
                                            <i class="fad fa-tag" *ngIf="DatosListaPromocionesCupones.tipo_promocion == 1" title="Cupón"></i>
                                            <i class="fad fa-calendar-day" *ngIf="DatosListaPromocionesCupones.tipo_promocion == 2" title="Días Cyber"></i></font>
                                        </td>
                                        <td class="text-center">
                                            <span *ngIf="DatosListaPromocionesCupones.tipo_sistema == 1" class="text-gray-900 fw-bold text-hover-primary fs-8">Ecommerce</span>
                                            <span *ngIf="DatosListaPromocionesCupones.tipo_sistema == 2" class="text-gray-900 fw-bold text-hover-primary fs-8">AutoServicio</span>
                                            <span *ngIf="DatosListaPromocionesCupones.tipo_sistema == 3" class="text-gray-900 fw-bold text-hover-primary fs-8">Intranet</span>
                                            <span *ngIf="DatosListaPromocionesCupones.tipo_sistema == 4" class="text-gray-900 fw-bold text-hover-primary fs-8">Sispas</span>
                                        </td>
                                        <!--<td class="text-center">
                                            <span *ngIf="DatosListaPromocionesCupones.tipo_promocion == 1" class="text-gray-900 fw-bold text-hover-primary fs-7">Cupón</span>
                                            <span *ngIf="DatosListaPromocionesCupones.tipo_promocion == 2" class="text-gray-900 fw-bold text-hover-primary fs-7">Cyber</span>
                                        </td>-->
                                        <td>
                                            <span class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-8">INICIO: <font class="fw-semibold">{{DatosListaPromocionesCupones.compra_inicio}}</font></span>
                                            <span class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-8">FIN: <font class="fw-semibold">{{DatosListaPromocionesCupones.compra_fin}}</font></span>
                                        </td>
                                        <td>
                                            <span class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-8">INICIO: <font class="fw-semibold">{{DatosListaPromocionesCupones.fecha_inicio}}</font></span>
                                            <span class="text-gray-900 fw-bold text-hover-primary d-block mb-1 fs-8">FIN: <font class="fw-semibold">{{DatosListaPromocionesCupones.fecha_fin}}</font></span>
                                        </td>
                                        <td>
                                            <span *ngIf="DatosListaPromocionesCupones.servicios.includes(codigosEconomico.trim())" style="border: 1px solid #ccc; border-radius: 7px; padding: 3px; font-size: 11px; margin: 2px; margin-bottom: 5px;">Económico</span>
                                            <span *ngIf="DatosListaPromocionesCupones.servicios.includes(codigosEjecutivoVip.trim())" style="border: 1px solid #ccc; border-radius: 7px; padding: 3px; font-size: 11px; margin: 2px;">EjecutivoVip</span><br>
                                            <span *ngIf="DatosListaPromocionesCupones.servicios.includes(codigosPresidencial.trim())" style="border: 1px solid #ccc; border-radius: 7px; padding: 3px; font-size: 11px; margin: 2px;">Presidencial</span>
                                            <span *ngIf="DatosListaPromocionesCupones.servicios.includes(codigosPremier.trim())" style="border: 1px solid #ccc; border-radius: 7px; padding: 3px; font-size: 11px; margin: 2px;">Premier</span>
                                        </td>
                                        <td class="text-gray-900 text-hover-primary fs-8">
                                            {{DatosListaPromocionesCupones.nombreGrupo_cupon}}
                                        </td>
                                        <td class="text-gray-900 fw-bold text-hover-primary fs-8 text-center">
                                            {{DatosListaPromocionesCupones.porcentaje_desc}}%
                                        </td>
                                        <td class="text-center">
                                            <span *ngIf="DatosListaPromocionesCupones.estado == 0" class="badge badge-light-danger fs-8">Inactivo</span>
                                            <span *ngIf="DatosListaPromocionesCupones.estado == 1" class="badge badge-light-success fs-8">Activo</span>
                                        </td>
                                        <td class="text-center">
                                            <font class="btn btn-icon btn-bg-light btn-active-color-warning btn-sm me-1" title="Editar" (click)="editarPromocionCupon(DatosListaPromocionesCupones);">
                                                <i class="ki-duotone ki-pencil fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                </i>
                                            </font>
                                            <font class="btn btn-icon btn-bg-light btn-active-color-danger btn-sm" title="Eliminar" (click)="eliminarPromocionCupon(DatosListaPromocionesCupones);">
                                                <i class="ki-duotone ki-trash fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                    <span class="path3"></span>
                                                    <span class="path4"></span>
                                                    <span class="path5"></span>
                                                </i>
                                            </font>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_create_editar_cupon" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered mw-900px">
        <div class="modal-content">
            <div class="modal-header">
                <h2>{{nameModal}}</h2>
                <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                    <i class="ki-duotone ki-cross fs-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>
                </div>
            </div>
            <div class="modal-body py-lg-10 px-lg-10">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <label class="col-sm-5 required fs-6 fw-semibold mb-2" style="display: flex; align-items: center;">Nombre del Cupón</label>
                            <div class="col-sm-7" style="display: flex; align-items: center;">
                                <input id="code_promocion" type="hidden" value="">
                                <input id="estado_promocion" type="hidden" value="">
                                <input id="nombre_promocion" type="text" class="form-control form-control-sm form-control-solid" placeholder="Nombre de Cupón"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3" style="display: flex; align-items: center;">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="rdbCupon" checked> &nbsp;
                        <label class="form-check-label" for="rdbCupon"> CUPÓN </label>
                    </div>
                    <div class="col-md-3" style="display: flex; align-items: center;">
                        <input class="form-check-input" type="radio" name="flexRadioDefault" id="rdbCyber"> &nbsp;
                        <label class="form-check-label" for="rdbCyber"> DÍAS CYBER </label>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <label class="col-sm-5 fs-6 fw-semibold mb-2" style="display: flex; align-items: center;">Fecha de Compra Inicio</label>
                            <div class="col-sm-7" style="display: flex; align-items: center;">
                                <input id="fecha_cupon_inicio" type="date" class="form-control form-control-sm form-control-solid"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <label class="col-sm-5 fs-6 fw-semibold mb-2" style="display: flex; align-items: center;">Fecha de Compra Fin</label>
                            <div class="col-sm-7" style="display: flex; align-items: center;">
                                <input id="fecha_cupon_fin" type="date" class="form-control form-control-sm form-control-solid"/>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <label class="col-sm-5 fs-6 fw-semibold mb-2" style="display: flex; align-items: center;">Fecha de Viaje Inicio</label>
                            <div class="col-sm-7" style="display: flex; align-items: center;">
                                <input id="fecha_compra_inicio" type="date" class="form-control form-control-sm form-control-solid"/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <label class="col-sm-5 fs-6 fw-semibold mb-2" style="display: flex; align-items: center;">Fecha de Viaje Fin</label>
                            <div class="col-sm-7" style="display: flex; align-items: center;">
                                <input id="fecha_compra_fin" type="date" class="form-control form-control-sm form-control-solid"/>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="row"><hr style="border: 1px solid #ced4da;"></div>
                <br>
                <div class="row">
                    <div class="col-2 text-center fs-6 fw-semibold mb-2">SERVICIOS</div>
                    <div class="col-10 text-center">
                        <input class="form-check-input" type="checkbox" id="chkEconomico">&nbsp;
                        <label class="form-check-label" for="chkEconomico">
                            ECONÓMICO
                        </label>
                        &nbsp;
                        <input class="form-check-input" type="checkbox" id="chkEjecutivo">&nbsp;
                        <label class="form-check-label" for="chkEjecutivo">
                            EJECUTIVO VIP
                        </label>
                        &nbsp;
                        <input class="form-check-input" type="checkbox" id="chkPresidencial">&nbsp;
                        <label class="form-check-label" for="chkPresidencial">
                            PRESIDENCIAL
                        </label>
                        &nbsp;
                        <input class="form-check-input" type="checkbox" id="chkPremier">&nbsp;
                        <label class="form-check-label" for="chkPremier">
                            PREMIER
                        </label>
                        &nbsp;
                    </div>
                </div>
                <br>
                <div class="row"><hr style="border: 1px solid #ced4da;"></div>
                <br>
                <div class="row">
                    <div class="col-sm-3" style="display: flex; align-items: end; justify-content: center;">
                        <label class="fs-6 fw-semibold mb-2">Porcentaje Descuento</label>
                    </div>
                    <div class="col-sm-2" style="display: flex; align-items: end; justify-content: center;">
                        <div class="input-group input-group-sm" style="flex-wrap: nowrap;">
                            <input type="number" id="porcentaje_descuento" class="form-control form-control-sm" placeholder="" min="1">
                            <span id="inputGroup-sizing-sm" class="input-group-text">%</span>
                        </div>
                    </div>
                    <div class="col-sm-3" style="display: flex; align-items: end; justify-content: center;">
                        <label class="fs-6 fw-semibold mb-2">Stock de Pasajeros</label>
                    </div>
                    <div class="col-sm-2" style="display: flex; align-items: end; justify-content: center;">
                        <input type="number" id="stock_pasajeros" class="form-control form-control-sm form-control-solid" style="width: 50%; text-align: center;" min="1" max="10" placeholder=""/>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-sm-3" style="display: flex; align-items: end; justify-content: center;">
                        <label class="fs-6 fw-semibold mb-2">Grupo Cupones</label>
                    </div>
                    <div class="col-sm-5" style="display: flex; align-items: end; justify-content: center;">
                        <select id="select_grupo_cupones" class="form-select form-select-sm" (change)="change_select_grupo_cupones()">
                            <option value="0" selected>Seleccionar</option>
                            <option *ngFor="let DatosGrupoCupones of ltGrupoCupones; index as i;" value="{{DatosGrupoCupones.grupocupones_id}}">{{DatosGrupoCupones.nombre}}</option>
                        </select>
                    </div>
                    <div class="col-sm-2" style="display: flex; align-items: end; justify-content: center;">
                        <input type="text" id="stock_grupo_cupones" class="form-control form-control-sm" style="width: 50%; text-align: center;" placeholder="" disabled/>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-sm-3" style="display: flex; align-items: end; justify-content: center;">
                        <label class="fs-6 fw-semibold mb-2">Sistema</label>
                    </div>
                    <div class="col-sm-5" style="display: flex; align-items: end; justify-content: center;">
                        <select id="select_sistemas" class="form-select form-select-sm">
                            <!--<option value="0" selected>Seleccionar</option>-->
                            <option value="1" selected>Ecommerce</option>
                            <!--<option value="2">AutoServicio</option>
                            <option value="3">Intranet</option>
                            <option value="4">Sispas</option>-->
                        </select>
                    </div>
                </div>
                <br>
                <div class="row"><hr style="border: 1px solid #ced4da;"></div>
                <br>
                <div class="row">
                    <div class="col-12" style="margin-bottom: 15px;">
                        <div style="justify-content: center; display: flex;">
                            <button id="btn_todas_rutas" class="btn btn-color-gray-600 btn-active btn-active-secondary px-6 py-3 me-2 active" (click)="todas_rutas()">Todas las rutas, menos excepciones</button>
                            <button id="btn_rutas_aceptadas" class="btn btn-color-gray-600 btn-active btn-active-secondary px-6 py-3" (click)="rutas_aceptadas()">Rutas exactas</button>
                        </div>
                    </div>
                    <div id="div_rutas_excluidas" class="col-12 mb-8">
                        <label class="fs-6 fw-semibold mb-2">Rutas Excluidas</label><br>
                        <select id="rutas_prohibidas" class="js-example-basic-multiple" multiple="multiple" style="z-index: 1057 !important;">
                            <option *ngFor="let lrutas of ltRutas" value="{{lrutas.id}}">{{lrutas.denominacion}}</option>
                        </select>
                    </div>
                    <div id="div_rutas_aceptadas" class="col-12 mb-8" style="display: none;">
                        <label class="fs-6 fw-semibold mb-2">Rutas Exactas</label>
                        <select id="rutas_aceptadas" class="js-example-basic-multiple" multiple="multiple" style="z-index: 1057 !important;">
                            <option *ngFor="let lrutas of ltRutas" value="{{lrutas.id}}">{{lrutas.denominacion}}</option>
                        </select>
                    </div>
                </div>
                <br>
                <div style="text-align: right;">
                    <button type="reset" id="kt_modal_new_target_cancel" class="btn btn-success me-3" (click)="guardarPromocion()">Guardar</button>
                    <button type="reset" id="kt_modal_new_target_cancel" class="btn btn-light me-3">Cancelar</button>       <!-- (click)="this.funcionesService.ocultar_modal('modal_create_editar_cupon')" -->
                </div>
            </div>
        </div>
    </div>
</div>