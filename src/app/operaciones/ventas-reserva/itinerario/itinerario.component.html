<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
    <div id="kt_app_toolbar_container" class="app-container container-fluid d-flex flex-stack">
        <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
        <h1 class="page-heading d-flex text-gray-900 fw-bold fs-3 flex-column justify-content-center my-0">Menú Principal</h1>
        <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
            <li class="breadcrumb-item text-muted">
                <font class="text-muted">Operaciones</font>
            </li>
            <li class="breadcrumb-item">
                <span class="bullet bg-gray-500 w-5px h-2px"></span>
            </li>
            <li class="breadcrumb-item text-muted">Venta y Reserva de pasajes</li>  <!-- {{tamanio_div}} -->
        </ul>
        </div>
        
        <!--<div class="d-flex align-items-center gap-2 gap-lg-3">
            <div class="m-0">
                <button class="btn btn-sm btn-flex btn-secondary fw-bold" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                    <i class="ki-outline ki-magnifier fs-6 text-muted me-1"></i> Buscar
                </button>
            </div>
            <button class="btn btn-sm fw-bold btn-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_create_app">Botón</button>
        </div>-->
        
    </div>
</div>

<div id="kt_app_content" class="app-content flex-column-fluid">
    <div id="div_vista_liquidacion_ayer" style="display: none; margin-left: 1.8%;">
        <p class="text-gray-500 pt-2 fw-semibold fs-6">Tiene una liquidación del día anterior, salga del sistema y vuelva a iniciar sesión.</p>
    </div>
    <div id="div_vista_no_liquidacion" style="display: none; margin-left: 1.8%;">
        <p class="text-gray-500 pt-2 fw-semibold fs-6">La caja está cerrada.</p>
    </div>
    <div #div_vista_itinerario id="div_vista_itinerario" class="app-container container-fluid">
        <!------------------------------------------------------- PROGRESS BAR ------------------------------------------------------->
        <div id="div_progressbar" class="row" style="border-color: #c5c5c5;">
            <div class="col-xxl-8 col-10">
                <div class="card card-flush mb-5" style="border-color: #c5c5c5;">
                    <div class="card-body pt-5 pb-5">
                        <div class="form-group row">
                            <div class="col-md-12">
                                <font style="color: #ada9a4; font-size: 13px;">Paso {{num_paso}} de {{paso_final}}: </font> 
                                <font style="color: #ff6719; font-size: 13px; font-weight: bold;">{{detalle_paso}}</font>
                                <font *ngIf="detalle_paso2 != ''" style="color: #696969; font-size: 12px; font-weight: bold;"> - {{detalle_paso2}}</font>
                            </div>
                            <div class="col-md-12">
                                <div class="progress progress1" style="background-color:#ffe5d7;">
                                    <div class="progress-bar w-{{porcen_bar}}" role="progressbar" [attr.aria-valuenow]="porcen_bar" aria-valuemin="0" aria-valuemax="100" style="background-color: #ff6719;"></div>
                                </div>
                            </div>
                            <div class="col-md-7">
                                <font style="color: #73737a; font-size: 11px; font-weight: bold;">{{sub_titulo}}</font>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!------------------------------------------------------- PROGRESS BAR ------------------------------------------------------->
        
        <!------------------------------------------------------- LISTA DE ITINERARIOS IDA ------------------------------------------------------->
        <div id="div_seleccion_itinerario" class="row g-5 gx-xl-10 mb-5">
            <div class="col-xxl-8 col-10">
                <div class="card card-flush mb-5" style="border-color: #c5c5c5;">
                    <div class="card-body pt-5 pb-5">
                        <div class="form-group row">
                            <div class="col-md-3">
                                <label class="form-label">ORIGEN*</label>
                                <select aria-label="Select a date format" data-hide-search="true" data-control="select2" class="form-select mb-2" [(ngModel)]="codLocalidadIda" (change)="onChangeOrigen()">
                                    <option value="0" selected>SELECCIONAR</option>
                                    <option *ngFor="let ltLoc of ltLocalidadOrigen" value="{{ltLoc.id}}">{{ltLoc.denominacion}}</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">DESTINO*</label>
                                <select aria-label="Select a date format" data-hide-search="true" data-control="select2" class="form-select mb-2" [(ngModel)]="codLocalidadDestino">
                                    <option value="0" selected>SELECCIONAR</option>
                                    <option *ngFor="let ltLoc of ltLocalidadDestino" value="{{ltLoc.id}}">{{ltLoc.denominacion}}</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">SALIDA*</label>
                                <input type="date" class="form-control mb-2" id="txtFechaSalida1" min="{{date_actual}}" [(ngModel)]="date_salida" name="salida">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label">RETORNO(OPCIONAL)</label>
                                <input type="date" class="form-control mb-2" id="txtFechaSalida1" min="{{date_salida}}" [(ngModel)]="date_retorno" name="retorno">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xxl-2 col-2" style="align-content: center;">
                <button class="btn btn-sm btn-success" (click)="buscar_itinerarios()">
                    <i class="ki-outline ki-magnifier fs-6 me-1"></i> BUSCAR ITINERARIOS
                </button>
            </div>
            <div id="div_listar_itinerarios_ida" class="col-xxl-8 col-10">
                <div *ngFor="let dat of listadoItinerariosIda" style="margin-bottom: 12px;">
                    <div class="card card-itinerario" *ngIf="dat.precioMinimo != 0">
                        <div class="row g-0">
                            <div class="col-8 col-lg-9 div_servicio">
                                <div style="margin-top: 2%;">
                                    <div class="servicio">Servicio</div>
                                    <div class="dat_servicio" style="display: flow-root;">
                                        <font>{{dat.servicio}}</font>
                                        <font *ngIf="dat.c_descripcion != null" class="dat_via_detalle">{{dat.c_descripcion}}</font>
                                    </div>
                                    <div class="linea_servicio"></div>
                                </div>
                                <div class="col-12 col-lg-12">
                                    <div class="row" style="margin-top: 10px;">
                                        <div class="col-5" style="display: flex; flex-direction: column; text-align: center;">
                                            <span class="dat_salida_embar">Embarque</span>  
                                            <span class="dat_hora_embar">{{dat.horaEmbarque}} h</span>
                                        </div>
                                        <div class="col-2" style="text-align: center;">
                                            <i class="fal fa-long-arrow-right icon_flecha"></i>
                                        </div>
                                        <div class="col-5" style="display: flex; flex-direction: column; text-align: center;">
                                            <span class="dat_llegada_desem">Desembarque</span>  
                                            <span class="dat_hora_desem">{{dat.horaDesembarque}} h</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 col-lg-3 casilla_precio" style="cursor: pointer;" (click)="seleccionar_itinerario_ida(dat)">
                                <div style="color: #4d4d4d; padding-bottom: 10px;">
                                    <div class="row">
                                        <div class="col-4 casilla_precio_c1">
                                            <div class="desde">desde </div>
                                            <font class="casilla_precio_num_1">S/</font>
                                        </div>
                                        <div class="col-8 casilla_precio_c2">
                                            <font class="casilla_precio_num_2">{{dat.precioMinimo}}</font><font *ngIf="verificar_punto(dat.precioMinimo) == 2" class="casilla_precio_num_1">.00</font><br>
                                        </div>
                                    </div>
                                    <div style="text-align: center; margin-top: 2%;">
                                        <span class="btn_select_service">SELECCIONAR</span>
                                    </div>
                                    <div style="text-align: center; margin-top: 2%;">
                                        <span *ngIf="dat.promocionFlag == 90" class="span_promocion" title="Esta ruta cuenta con una promoción">
                                            Cyber WOW
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-8 col-lg-9 margin_embarque_desembarque" [ngClass]="{'margin_embarque_desembarque2': dat.promocionFlag == 90}">
                                <div class="col-12 col-lg-12">
                                    <div class="row">
                                        <div class="col-5" style="display: flex; flex-direction: column; text-align: center;">
                                            <span class="dat_salida_embar_detall">{{dat.direccionEmbarque}}</span>
                                        </div>
                                        <div class="col-2" style="text-align: center;">&nbsp;</div>
                                        <div class="col-5" style="display: flex; flex-direction: column; text-align: center;">
                                            <span class="dat_llegada_desem_detall">{{dat.direccionDesembarque}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 col-lg-2">&nbsp;</div>
                            <div class="col-12 margin_asientos_dispo" style="padding-right: 6px;">
                                <div style="margin-top: 0px; text-align: right;">
                                    <font class="dat_llegada_desem" style="color: #ff6719; margin-right: 3.7%;">Solo quedan {{dat.nroAsientosDisponible}} asientos</font>
                                </div>
                            </div>
                            <div class="col-12 div_footer" style="padding-bottom: 3px;">
                                <div style="border-top: #bfbfbf 1px solid;">
                                    <div class="icon_detalle"><i class="fad fa-bus-alt" style="color: #a2a2a2;"></i>&nbsp;<font *ngIf="dat.nropisos == 1">{{dat.nropisos}} Piso</font> <font *ngIf="dat.nropisos == 2">{{dat.nropisos}} Pisos</font></div>
                                    <div class="icon_detalle"><i class="fad fa-clock" style="color: #a2a2a2;"></i>&nbsp;{{dat.duracionViaje}}h</div>
                                    <div class="icon_detalle"><i class="fad fa-dot-circle" style="color: #a2a2a2;"></i>&nbsp;{{dat.nroescala}} Escalas</div>
                                    <div class="icon_detalle icon_detalle_asientos" style="margin-top: 5px;">
                                        <img src="./assets/img/iconos/seat.png" alt="" class="img-fluid image_detalle"/>&nbsp;
                                        <font *ngIf="dat.servAsiento1 != ''">{{dat.servAsiento1}}</font>
                                        <font *ngIf="dat.nropisos == 2">|{{dat.servAsiento2}}</font>
                                    </div>
                                    <div class="icon_detalle" style="float: right; cursor: pointer; margin-right: 0.3%; font-size: 12px;">Itinerario: {{dat.iditinerario}} &nbsp;&nbsp; Ruta: {{dat.idruta}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_not_tickets_ida" tabindex="-1" role="dialog" aria-labelledby="modal_not_ticketsIdaLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body row" style="padding: 0rem !important;">
            <div class="col-9" style="background-color: white; padding: 1rem; border-top-left-radius: 10px; border-bottom-left-radius: 10px;">
                <font style="color: #4E4D50; font-weight: bold; font-size: 16px;">No hay pasajes disponibles de Ida para la fecha indicada.</font><br>
                <font style="color: #a0a0a0; font-weight: bold; font-size: 12px;">Elija otra fecha de Ida para que pueda comprar tus pasajes.</font>
            </div>
            <div class="col-3 text-center" style="background-color: rgb(211, 211, 211); padding-top: 2rem; border-top-right-radius: 10px; border-bottom-right-radius: 10px;">
                <i class="fad fa-times" style="cursor: pointer; font-size: 43px; color: #ff6719;"></i>  <!-- (click)="funcionesService.ocultar_modal('modal_not_tickets_ida')" -->
            </div>
        </div>
      </div>
    </div>
</div>

<div class="modal fade" id="modal_not_tickets_vuelta" tabindex="-1" role="dialog" aria-labelledby="modal_not_ticketsVueltaLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body row" style="padding: 0rem !important;">
            <div class="col-9" style="background-color: white; padding: 1rem; border-top-left-radius: 10px; border-bottom-left-radius: 10px;">
                <font style="color: #4E4D50; font-weight: bold; font-size: 16px;">No hay pasajes disponibles de retorno para la fecha indicada.</font><br>
                <font style="color: #a0a0a0; font-weight: bold; font-size: 12px;">Elija otra fecha de retorno para que pueda comprar tus pasajes.</font>
            </div>
            <div class="col-3 text-center" style="background-color: rgb(211, 211, 211); padding-top: 2rem; border-top-right-radius: 10px; border-bottom-right-radius: 10px;">
                <i class="fad fa-times" style="cursor: pointer; font-size: 43px; color: #ff6719;"></i>      <!-- (click)="funcionesService.ocultar_modal('modal_not_tickets_vuelta')" -->
            </div>
        </div>
      </div>
    </div>
</div>